@namespace NewLife.CubeUI
@using NewLife.CubeUI.Services
@inherits LayoutComponentBase
@inject IMenuService _MenuService

<AntDesign.Pro.Layout.BasicLayout Logo="@("https://gw.alipayobjects.com/zos/rmsportal/KDpgvguMpGfqaHPjicRK.svg")"
MenuData="_menuData">
    <RightContentRender>
        <RightContent />
    </RightContentRender>
    <ChildContent>
        @Body
    </ChildContent>
</AntDesign.Pro.Layout.BasicLayout>
<SettingDrawer />

@code
{
    private MenuDataItem[] _menuData =
    {
    new MenuDataItem
    {
    Path = "/",
    Name = "welcome",
    Key = "welcome",
    Icon = "smile",
    }
    };

    protected override async Task OnInitializedAsync()
    {
        await _MenuService.GetAsync();

        _menuData = _MenuService.MenuTree.Select(s => new MenuDataItem
        {
            Path = s.Url,
            Name = s.Name,
            Key = s.ID + "",
            Icon = s.Icon ?? "smile",
        }).ToArray();

        await base.OnInitializedAsync();
    }
}